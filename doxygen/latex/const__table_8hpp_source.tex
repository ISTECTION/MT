\hypertarget{const__table_8hpp_source}{}\doxysection{const\+\_\+table.\+hpp}
\label{const__table_8hpp_source}\index{include/const\_table.hpp@{include/const\_table.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef \_CONST\_TABLE\_HPP}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define \_CONST\_TABLE\_HPP}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}tabulate/tabulate.hpp"{}}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <type\_traits>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <filesystem>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <optional>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <fstream>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <set>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{namespace }path\_const\_table \{}
\DoxyCodeLine{17 }
\DoxyCodeLine{18     \textcolor{keyword}{const} std::filesystem::path}
\DoxyCodeLine{19         keywords    = \textcolor{stringliteral}{"{}file/const/table\_keywords.txt"{}},}
\DoxyCodeLine{20         operations  = \textcolor{stringliteral}{"{}file/const/table\_operations.txt"{}},}
\DoxyCodeLine{21         separators  = \textcolor{stringliteral}{"{}file/const/table\_separators.txt"{}};}
\DoxyCodeLine{22 \}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \textcolor{keyword}{template} <\textcolor{keyword}{class} \_Type> \textcolor{keyword}{class }\mbox{\hyperlink{classconst__table}{const\_table}};}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{keyword}{template} <\textcolor{keyword}{class} \_Type>}
\DoxyCodeLine{28 \textcolor{keyword}{class }\mbox{\hyperlink{classconst__table__operation}{const\_table\_operation}} : \textcolor{keyword}{public} \mbox{\hyperlink{classconst__table}{const\_table}}<\_Type>}
\DoxyCodeLine{29 \{}
\DoxyCodeLine{30 \textcolor{keyword}{private}:}
\DoxyCodeLine{31     std::map<\_Type, std::size\_t> \_priority\_oper;}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 \textcolor{keyword}{public}:}
\DoxyCodeLine{34     \textcolor{keyword}{explicit} \mbox{\hyperlink{classconst__table__operation}{const\_table\_operation}} (\textcolor{keyword}{const} std::filesystem::path\& \_path) : \mbox{\hyperlink{classconst__table}{const\_table<\_Type>}}() \{}
\DoxyCodeLine{35         std::ifstream fin(\_path);}
\DoxyCodeLine{36         \textcolor{keywordtype}{bool} is\_open = read\_file(fin);}
\DoxyCodeLine{37 }
\DoxyCodeLine{38         \textcolor{keywordflow}{if} (is\_open == \textcolor{keyword}{false})}
\DoxyCodeLine{39             std::cerr}
\DoxyCodeLine{40                 << \textcolor{stringliteral}{"{}file not open: "{}}}
\DoxyCodeLine{41                 << \_path.string().c\_str()}
\DoxyCodeLine{42                 << \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{43     \}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     std::size\_t get\_priority (\_Type \_operation)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{46         \textcolor{keyword}{auto} it = \_priority\_oper.find(\_operation);}
\DoxyCodeLine{47 }
\DoxyCodeLine{48         \textcolor{keywordflow}{return} it == \_priority\_oper.end()}
\DoxyCodeLine{49             ? \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}priority operation not found: "{}} + \_operation)}
\DoxyCodeLine{50             : it-\/>second ;}
\DoxyCodeLine{51     \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{keyword}{private}:}
\DoxyCodeLine{57     \textcolor{keywordtype}{bool} read\_file (std::ifstream\& \_istream)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{58         \textcolor{keyword}{auto} \_read = [\textcolor{keyword}{this}](std::ifstream\& \_istream) -\/> \textcolor{keywordtype}{bool} \{}
\DoxyCodeLine{59             std::size\_t \_priority\_count;}
\DoxyCodeLine{60             \textcolor{keywordflow}{for} (\_Type elem; \_istream >> elem >> \_priority\_count;}
\DoxyCodeLine{61             this-\/>\mbox{\hyperlink{classconst__table_a94469eeb7d11725c76b0c5fe586d1a60}{add}}(elem), add\_priority(elem, \_priority\_count));}
\DoxyCodeLine{62             \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \};}
\DoxyCodeLine{63         \textcolor{keywordflow}{return} \_istream.is\_open() ? \_read(\_istream) : \textcolor{keyword}{false};}
\DoxyCodeLine{64     \}}
\DoxyCodeLine{65 }
\DoxyCodeLine{70     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} add\_priority (\_Type elem, std::size\_t \_count\_p);}
\DoxyCodeLine{71 \};}
\DoxyCodeLine{72 }
\DoxyCodeLine{73 \textcolor{keyword}{template} <\textcolor{keyword}{class} \_Type>}
\DoxyCodeLine{74 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classconst__table__operation}{const\_table\_operation<\_Type>::add\_priority}} (\_Type elem, std::size\_t \_count\_p) \{}
\DoxyCodeLine{75     \_priority\_oper.insert(std::pair<\_Type, std::size\_t>(elem, \_count\_p));}
\DoxyCodeLine{76 \}}
\DoxyCodeLine{77 }
\DoxyCodeLine{81 \textcolor{keyword}{template} <\textcolor{keyword}{class} \_Type>}
\DoxyCodeLine{82 \textcolor{keyword}{class }\mbox{\hyperlink{classconst__table}{const\_table}}}
\DoxyCodeLine{83 \{}
\DoxyCodeLine{84 \textcolor{keyword}{private}:}
\DoxyCodeLine{85     std::set<\_Type> table;}
\DoxyCodeLine{86 }
\DoxyCodeLine{87 \textcolor{keyword}{public}:}
\DoxyCodeLine{88     \mbox{\hyperlink{classconst__table}{const\_table}} () \{ \}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \textcolor{keyword}{explicit} \mbox{\hyperlink{classconst__table}{const\_table}} (\textcolor{keyword}{const} std::filesystem::path\& \_path) \{}
\DoxyCodeLine{91         std::ifstream fin(\_path);}
\DoxyCodeLine{92         \textcolor{keywordtype}{bool} is\_open = \mbox{\hyperlink{classconst__table_a5e0e0037ce3fdd4440ac12e64663fd7b}{read\_file}}(fin);}
\DoxyCodeLine{93 }
\DoxyCodeLine{94         \textcolor{keywordflow}{if} (is\_open == \textcolor{keyword}{false})}
\DoxyCodeLine{95             std::cerr}
\DoxyCodeLine{96                 << \textcolor{stringliteral}{"{}file not open: "{}}}
\DoxyCodeLine{97                 << \_path.string().c\_str()}
\DoxyCodeLine{98                 << \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{99     \}}
\DoxyCodeLine{100 }
\DoxyCodeLine{107     \textcolor{keywordtype}{int} \mbox{\hyperlink{classconst__table_a39cbb8ada1d5148dc9ed12b75c9add3f}{get\_num}} (\_Type elem) \textcolor{keyword}{const};}
\DoxyCodeLine{108 }
\DoxyCodeLine{116     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classconst__table_ab9aa191fb8e4fad29d3e6e66e588f5e3}{contains}} (\_Type elem) \textcolor{keyword}{const};}
\DoxyCodeLine{117 }
\DoxyCodeLine{124     std::optional<\_Type> \mbox{\hyperlink{classconst__table_a6d3061b4af4980d395ec1b2123645db9}{get\_elem}} (\textcolor{keywordtype}{size\_t} num) \textcolor{keyword}{const};}
\DoxyCodeLine{125 }
\DoxyCodeLine{129     \textcolor{keyword}{template} <\textcolor{keyword}{typename} V>}
\DoxyCodeLine{130     \textcolor{keyword}{friend} std::ostream\& \mbox{\hyperlink{classconst__table_a42be9765ba45ca44e2ec928871d4a75d}{operator<< }}(std::ostream\& out, \textcolor{keyword}{const} \mbox{\hyperlink{classconst__table}{const\_table<V>}}\& \_tbl);}
\DoxyCodeLine{131 }
\DoxyCodeLine{138     \textcolor{keywordtype}{int} \mbox{\hyperlink{classconst__table_a660bc4276a3ec7c7d628826fe0578619}{operator[] }}(\_Type elem) \textcolor{keyword}{const} \textcolor{keyword}{noexcept};}
\DoxyCodeLine{139 }
\DoxyCodeLine{143     \textcolor{keyword}{typename} std::set<\_Type>::const\_iterator \mbox{\hyperlink{classconst__table_a1ef2e968c2d73ed858206e6dbf8bb5fb}{begin}} () \textcolor{keyword}{const};}
\DoxyCodeLine{144 }
\DoxyCodeLine{148     \textcolor{keyword}{typename} std::set<\_Type>::const\_iterator \mbox{\hyperlink{classconst__table_ada335a7e8a5b792b6e7dfc7259c7966c}{end}} () \textcolor{keyword}{const};}
\DoxyCodeLine{149 }
\DoxyCodeLine{150 \textcolor{keyword}{protected}:}
\DoxyCodeLine{151 }
\DoxyCodeLine{155     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{classconst__table_a5e0e0037ce3fdd4440ac12e64663fd7b}{read\_file}} (std::ifstream\& );}
\DoxyCodeLine{156 }
\DoxyCodeLine{161     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classconst__table_a94469eeb7d11725c76b0c5fe586d1a60}{add}} (\_Type elem);}
\DoxyCodeLine{162 \};}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Type>}
\DoxyCodeLine{165 \textcolor{keyword}{typename} std::set<\_Type>::const\_iterator \mbox{\hyperlink{classconst__table_a1ef2e968c2d73ed858206e6dbf8bb5fb}{const\_table<\_Type>::begin}} ()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{166     \textcolor{keywordflow}{return} table.begin();}
\DoxyCodeLine{167 \}}
\DoxyCodeLine{168 }
\DoxyCodeLine{169 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Type>}
\DoxyCodeLine{170 \textcolor{keyword}{typename} std::set<\_Type>::const\_iterator \mbox{\hyperlink{classconst__table_ada335a7e8a5b792b6e7dfc7259c7966c}{const\_table<\_Type>::end}} ()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{171     \textcolor{keywordflow}{return} table.end();}
\DoxyCodeLine{172 \}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Type>}
\DoxyCodeLine{175 \textcolor{keywordtype}{bool} \mbox{\hyperlink{classconst__table_ab9aa191fb8e4fad29d3e6e66e588f5e3}{const\_table<\_Type>::contains}} (\_Type elem)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{176     \textcolor{keyword}{using} \_Iter = \textcolor{keyword}{typename} std::set<\_Type>::iterator;}
\DoxyCodeLine{177     \_Iter it = table.find(elem);}
\DoxyCodeLine{178     \textcolor{keywordflow}{return} it == table.end()}
\DoxyCodeLine{179         ? false}
\DoxyCodeLine{180         : true ;}
\DoxyCodeLine{181 \}}
\DoxyCodeLine{182 }
\DoxyCodeLine{183 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Type>}
\DoxyCodeLine{184 \textcolor{keywordtype}{int} \mbox{\hyperlink{classconst__table_a39cbb8ada1d5148dc9ed12b75c9add3f}{const\_table<\_Type>::get\_num}} (\_Type elem)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{185     \textcolor{keyword}{using} \_Iter = \textcolor{keyword}{typename} std::set<\_Type>::iterator;}
\DoxyCodeLine{186     \_Iter it = table.find(elem);}
\DoxyCodeLine{187     \textcolor{keywordflow}{return} it == table.end()}
\DoxyCodeLine{188         ? -\/1}
\DoxyCodeLine{189         : std::distance(table.begin(), it);}
\DoxyCodeLine{190 \}}
\DoxyCodeLine{191 }
\DoxyCodeLine{192 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Type>}
\DoxyCodeLine{193 std::optional<\_Type> \mbox{\hyperlink{classconst__table_a6d3061b4af4980d395ec1b2123645db9}{const\_table<\_Type>::get\_elem}} (\textcolor{keywordtype}{size\_t} num)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{194     \textcolor{keyword}{using} \_Iter = \textcolor{keyword}{typename} std::set<\_Type>::iterator;}
\DoxyCodeLine{195     \textcolor{keywordflow}{if} (num < table.size()) \{}
\DoxyCodeLine{196         \_Iter it = table.begin();}
\DoxyCodeLine{197         std::advance(it, num);}
\DoxyCodeLine{198         \textcolor{keywordflow}{return} std::optional \{ *it \};}
\DoxyCodeLine{199     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{200         \textcolor{keywordflow}{return} std::nullopt;}
\DoxyCodeLine{201 \}}
\DoxyCodeLine{202 }
\DoxyCodeLine{203 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Type>}
\DoxyCodeLine{204 \textcolor{keywordtype}{bool} \mbox{\hyperlink{classconst__table_a5e0e0037ce3fdd4440ac12e64663fd7b}{const\_table<\_Type>::read\_file}} (std::ifstream\& \_istream) \{}
\DoxyCodeLine{205     \textcolor{keyword}{auto} \_read = [\textcolor{keyword}{this}](std::ifstream\& \_istream) -\/> \textcolor{keywordtype}{bool} \{}
\DoxyCodeLine{206         \textcolor{keywordflow}{for} (\_Type elem; \_istream >> elem; add(elem));}
\DoxyCodeLine{207         \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \};}
\DoxyCodeLine{208     \textcolor{keywordflow}{return} \_istream.is\_open() ? \_read(\_istream) : \textcolor{keyword}{false};}
\DoxyCodeLine{209 \}}
\DoxyCodeLine{210 }
\DoxyCodeLine{211 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Type>}
\DoxyCodeLine{212 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classconst__table_a94469eeb7d11725c76b0c5fe586d1a60}{const\_table<\_Type>::add}} (\_Type elem) \{}
\DoxyCodeLine{213     table.insert(elem);}
\DoxyCodeLine{214 \}}
\DoxyCodeLine{215 }
\DoxyCodeLine{216 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Type>}
\DoxyCodeLine{217 \textcolor{keywordtype}{int} \mbox{\hyperlink{classconst__table_a660bc4276a3ec7c7d628826fe0578619}{const\_table<\_Type>::operator[] }}(\_Type elem) \textcolor{keyword}{const} \textcolor{keyword}{noexcept} \{}
\DoxyCodeLine{218     \textcolor{keywordflow}{return} get\_num(elem);}
\DoxyCodeLine{219 \}}
\DoxyCodeLine{220 }
\DoxyCodeLine{221 \textcolor{keyword}{template} <\textcolor{keyword}{typename} V>}
\DoxyCodeLine{222 std::ostream\& operator<< (std::ostream\& out, \textcolor{keyword}{const} \mbox{\hyperlink{classconst__table}{const\_table<V>}}\& \_tbl) \{}
\DoxyCodeLine{223     \textcolor{keyword}{using} \_Iter = \textcolor{keyword}{typename} std::set<V>::const\_iterator;}
\DoxyCodeLine{224 }
\DoxyCodeLine{225     tabulate::Table movies;}
\DoxyCodeLine{226 }
\DoxyCodeLine{227     movies.add\_row(\{ \textcolor{stringliteral}{"{}id"{}}, \textcolor{stringliteral}{"{}name"{}} \});}
\DoxyCodeLine{228     \textcolor{keywordflow}{if}(std::is\_same<V, std::string>::value) \{}
\DoxyCodeLine{229         \_Iter it = \_tbl.\mbox{\hyperlink{classconst__table_a1ef2e968c2d73ed858206e6dbf8bb5fb}{begin}}();}
\DoxyCodeLine{230         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} pos = 0; it != \_tbl.\mbox{\hyperlink{classconst__table_ada335a7e8a5b792b6e7dfc7259c7966c}{end}}(); pos++) \{}
\DoxyCodeLine{231             movies.add\_row(\{}
\DoxyCodeLine{232                     std::to\_string(pos),}
\DoxyCodeLine{233                     std::string \{ *it \}  \});}
\DoxyCodeLine{234             ++it;}
\DoxyCodeLine{235         \}}
\DoxyCodeLine{236     \}}
\DoxyCodeLine{237     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{238         std::cerr << \textcolor{stringliteral}{"{}This type is not processed"{}} << \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{239         std::exit(2); \}}
\DoxyCodeLine{240 }
\DoxyCodeLine{241     movies.column(0).format().font\_align(tabulate::FontAlign::center).width(8);}
\DoxyCodeLine{242     movies.column(1).format().font\_align(tabulate::FontAlign::center).width(32);}
\DoxyCodeLine{243     \textcolor{keywordflow}{return} out << movies << \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{244 \}}
\DoxyCodeLine{245 \textcolor{preprocessor}{\#endif }}

\end{DoxyCode}
